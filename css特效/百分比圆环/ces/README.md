
### 目录本地开发注意事项
```
1、 app.js 里面修改   let devHost="s01.demo.krclouds.com"
2、 index.html  <script src="https://s01.demo.krclouds.com/resources/assets/external/requirejs/require.js"></script>
3、 app.js 里面维护变量   let PageConfig={}

4.如何本地运行
    //安装
    cnpm install http-server -g
    //运行
    http-server   --port 8080 .

```

### 发版注意事项
```
1.需要修改的文件
    index.html
    finceProfitLoss.html

2.需要修改的地方
    <head>标签内的引入文件---如下两行代码（href中host(window.location.hostname)内容可能有所不同）
      => => => => => => => => =>
    <link rel="stylesheet" href="https://s01.demo.krclouds.com/resources/autogenerated/qlik-styles.css">
    <script src="https://s01.demo.krclouds.com/resources/assets/external/requirejs/require.js"></script>


3.不同环境下修改的内容
    本地 || S01
        s01.demo.krclouds.com

    qst
        qst.syngentachina.com

    qs
        qs.syngentachina.com

```

### Page.Config.js 变量说明
```
UserInfo{
    exp:  ''/报表更新时间/
}
PageList[
    { //页面1
            AppId: "a7b5ca8c-d33b-4b26-abc7-3355d21ef417",  // 本地 || S01
            qsAppId: "",    //qs客户正式环境
            qstAppId: "e9e04734-5d1c-413e-8134-0c72a139f567",   //qst客户测试环境
            // 报表更新时间
            ReportUpdateTime: {
                exp: `$(vReportUpdateTime)`
            },
            Title: "",
            SubTitle: "",
            ItemList: [{ //销售金额--经销商扫描金额--零售店扫描金额
                AppId: "", // AppID为空 就使用页面的AppId
                qsAppId: "",
                qstAppId: "",
                Title: "",
                SubTitle: "",
                ItemType: "ChartObj", //  // MapObj 自定义
                QVID: "QV01",
                Expstr: "", //[顾问提供] 
                ObjId: "msqPzY" //[顾问提供]
            },{
                .......
            }]
    },
    {//页面2

    },
    {//页面三

    }...
]

//获取Appid和objid过程文档：https://keyportaldev.krclouds.com/upload/2/0/20210528/1622189215626737900.docx	


```

### app.js函数说明

```
    1.变量说明
    devHost     //s01和dev地址--------无需修改
    qstHost     //客户测试环境地址
    qsHost      //客户正式环境地址
    config      //地址拼接------------无需修改

    2.函数说明
    
    openApp（）   //通过appid打开qlick obj  ------无需修改

    InitPageListData() //通过遍历Page.Config文件内容获取所需要的Appid   ----> 主要函数、无需修改

    clearAll（） ----> 筛选器清空函数

    3.调用
    InitPageListData()函数在window.require(["js/qlik"], (qlik) => {....}内使用
    用于对Page.Config中的变量值的初步选择与 函数声明。

    clearAll（）在其他界面中调用，为按钮增加清除删选器功能

```

### html文件说明

```
目前使用到的html文件有: index.html 和 financeProfitLoss.html

通过window.location.href跳转界面

index.html 开发状态---->未完成


financeProfitLoss.html 开发状态 ----> 基本实现 等待后续更改


financeProfitLoss.html 内容详解
    使用到的相关文件 app.css 和 page/financeProfitLoss路径下的文件

    1、按钮切换思路：操作dom元素添加class样式
        为按钮添加class的相关点击样式-》
        移除未点击按钮的样式 -》
        进行后续操作
    
    2.部分区域显示影藏
        因为调用的是qlick的obj 在页面加载的时候就需要加载出来
        所以要对其进行预设操作，让它能加载出来，但用户看不见。

        使用到的操作有：
            1.在整体布局上使用position: absolute;让多个区块叠加在一起
            2.对未显示的区块进行visibility = "hidden"让其暂时隐藏。
            3.点击按钮的时候通过dom元素对style进行操作，修改显示和影藏的状态，达到切换的效果

```

### 发版流程
    1.压缩文件 ---》除了.git文件夹不压缩其他文件都需要进行压缩 压缩格式为.zip
    2.发布到 https://s01.demo.krclouds.com/qmc/
    3.查看  https://s01.demo.krclouds.com/dev-hub/


    发版详细解说ppt下载路径： https://keyportaldev.krclouds.com/upload/2/0/20210528/1622187878060945500.docx	
